# Utilities

## GMRFS
The `RFS.utils.GMRFS` class represents a Random Finit Set (RFS) as a Gaussian mixture. It provides operators for adding two GMRFS objects together, as well as scaling a GMRFS by a scalar.

# l-CPHD
The "lambda-CPHD" (l-CPHD) filter is an adaptive Cardinalized Probability Hypothesis Density (CPHD) filter that jointly estimates the clutter rate as well as the cardinality and states of a set of tracked objects. Clutter rate is estimated by assuming that clutter returns are generated by an unknown number of "clutter generator" objects, that can exist anywhere at any given time.

## Usage
### 1. Define System Model
The system model used by the l-CPHD filter is encapsulated in the `RFS.CPHD.cphd_model` class. An instance of the class should be created and populated with values representative of the system. The class has the following properties that can be set:

#### `F`: Target dynamics
State transition matrix for target objects, [k+1] = Fx[k], NxN

#### `Q`: Target process noise
Target process noise covariance, NxN

#### `ps0`: Clutter generator survival probability
The probability that a clutter generator that exists at time t will still exist at time t+1. Must be in range (0, 1)

#### `ps1`: Target survival probability
The probability that a target that exists at time t will still exist at time t+1. Must be in range (0, 1)

#### `pd0`: Clutter detection probability
Probability of detecting a given clutter generator. Must be in range (0, 1)

#### `pd1`: Target detection probability
Probability of detecting a given target. Must be in range (0, 1)

#### `Ngamma0`: Mean number of clutter births
Expected number of new clutter generators that appear at a given time step

#### `gamma1`: Target birth model
RFS.utils.GRFS object representing the target birth model. The filter assumes birth process is poisson

#### `kappa`: Spatial likelihood of clutter
The current l-CPHD implementation assumes that clutter is equally distributed across the field of view, so this parameter should be set to 1/A where A is the area of the field of view.

Example:
```
model = RFS.CPHD.cphd_model();

% Target dynamics
n_states = 2;
model.F = eye(n_states);      % State transition matrix x[k+1] = Fx[k], NxN
model.Q = .5 * eye(n_states); % Process noise, NxN

% Detection and survival probabilities
model.pd0 = 0.75;    % Probability of detecting a "clutter generator" object
model.pd1 = 0.95;    % Probability of detecting a target
model.ps0 = 0.9;     % Probability of clutter generator survival
model.ps1 = 0.99;    % Probability of target survival

% Target birth model
bm = load('./models/birth_model_200_uniform_rb.mat');
birth_rate = 0.01; % Expected rate of new births
model.gamma1 = birth_rate .* bm.gamma;

% clutter
A_fov = 1e6;              % Field of view area
model.Ngamma0 = 5;        % Mean clutter birth rate
model.kappa = 1 / A_fov;  % Clutter is equally likely anywhere
```

### 2. Specify Filtering Parameters
There are a number of parameters that can be set to adjust how the filter behaves that are independent of the system itself. These are encapsulated in the `RFS.CPHD.cphd_params` class. The parameters are

#### `Nmax`: Maximum number of objects to track
Maximum number of targets to track. This should be set high enough to include the maximum number of expected objects and clutter returns. Higher values will increase computation load.

#### `U`: Threshold for merging components during pruning    
At each update step the number of components in the GMRFS representing the set of tracked objects must be pruned
#### `T`: Threshold for discarding components during pruning

#### `Jmax`: Maximum number of components to keep

### 3. Filter

## Parameters


  

# GMPHD
